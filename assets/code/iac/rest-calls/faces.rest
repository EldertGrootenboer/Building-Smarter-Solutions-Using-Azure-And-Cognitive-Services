@persongroup = visitors
@apiUrl = westeurope.api.cognitive.microsoft.com/face/v1.0

### Create persongroup
PUT https://{{apiUrl}}/persongroups/{{persongroup}} HTTP/1.1
Content-Type: application/json
Ocp-Apim-Subscription-Key: {{faceApiSubscriptionKey}}

{
    "name": "{{persongroup}}",
    "recognitionModel": "recognition_01"
}

### Create person in persongroup
# @name person
POST https://{{apiUrl}}/persongroups/{{persongroup}}/persons HTTP/1.1
Content-Type: application/json
Ocp-Apim-Subscription-Key: {{faceApiSubscriptionKey}}

{
    "name": "Eldert Grootenboer"
}

### Add face to person
POST https://{{apiUrl}}/persongroups/{{persongroup}}/persons/{{person.response.body.personId}}/persistedFaces?detectionModel=detection_01 HTTP/1.1
Content-Type: application/json
Ocp-Apim-Subscription-Key: {{faceApiSubscriptionKey}}

{
    "url": "{{faceImageUrl}}"
}

### Train person group
POST https://{{apiUrl}}/persongroups/{{persongroup}}/train HTTP/1.1
Ocp-Apim-Subscription-Key: {{faceApiSubscriptionKey}}

### Get training status
GET https://{{apiUrl}}/persongroups/{{persongroup}}/training HTTP/1.1
Ocp-Apim-Subscription-Key: {{faceApiSubscriptionKey}}

############################### TESTS ###############################
### Detect face
# @name face
POST https://{{apiUrl}}/detect?returnFaceId=true&returnFaceLandmarks=false&recognitionModel=recognition_01&returnRecognitionModel=false&detectionModel=detection_01 HTTP/1.1
Content-Type: application/json
Ocp-Apim-Subscription-Key: {{faceApiSubscriptionKey}}

{
    "url": "{{faceImageUrl}}"
}

### Update faceIds with result from previous call ###
### Identify face
POST https://{{apiUrl}}/identify HTTP/1.1
Content-Type: application/json
Ocp-Apim-Subscription-Key: {{faceApiSubscriptionKey}}

{
    "personGroupId": "{{persongroup}}",
    "faceIds": [
        "4f6e1517-aad6-489f-beec-236a72204f0b"
    ],
    "maxNumOfCandidatesReturned": 1,
    "confidenceThreshold": 0.5
}